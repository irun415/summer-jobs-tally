<html>
<head>
<title>Mayor's Summer Jobs Challenge</title>
<link href='http://fonts.googleapis.com/css?family=Montserrat' rel='stylesheet' type='text/css'>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">
</head>

<body>
  <div class="row" style="background-color:#56ADE0;color:#fff;">
  	<div class="col-md-2"><img src="http://sfsummerjobs.org/wp-content/uploads/2013/05/logo.png" style="margin-bottom:2.5em;margin-left:1.5em;height:10em;padding-top:1em;display:block;-webkit-filter: drop-shadow(10px 10px 5px #222); filter: drop-shadow(10px 10px 5px #222); "></div>
    <div id='jobsNo' class="col-md-5 jobsno" style="font-family:Montserrat;text-align:left;font-size:4em;margin-top:0.3em;"></div>
    
    <div id='goalNo' class="col-md-5 " style="font-family:Montserrat;text-align:left;font-size:4em;margin-top:0.3em;">7,000</div>
     <div class="col-md-10">
			 <div id='jobsLabel' class="col-md-5" style="font-family:Montserrat;text-align:left;font-size:2em;margin-bottom:0.5em;padding-left:0em;">
				Total Jobs Pledged
			</div>
			 <div id='goalLabel' class="col-md-5" style="font-family:Montserrat;text-align:left;font-size:2em;margin-bottom:0.5em;padding-left:4em">
				Jobs Goal
			</div>
    </div>
  </div>
  <div class="row">
    <div id='chart' class="col-md-12 chart" style="height:100%; min-height: 100%;"></div>
  </div>
  <script src="//code.jquery.com/jquery-1.11.0.min.js"></script>
  <script type="text/javascript" src="https://www.google.com/jsapi"></script>

  <script type="text/javascript">
  google.load("visualization", '1', {packages:['table','corechart']});
  google.setOnLoadCallback(drawChart);

  function drawChart() {
    var query = new google.visualization.Query(
        'https://docs.google.com/spreadsheets/d/1eko8LIH17ZXOKfWEEQtOBr5dOWQEU-jLDxi48Qj2-Q8/gviz/tq?gid=715717633&headers=1&range=A%3AD');
    query.setRefreshInterval(10)
    query.send(handleQueryResponse);
  }

  function handleQueryResponse(response) {
    if (response.isError()) {
      alert('Error in query: ' + response.getMessage() + ' ' + response.getDetailedMessage());
      return;
    }

    // Grab data from the response, this will be the full spreadsheet
    var chartData = response.getDataTable();
    totalJobs = chartData.getColumnLabel(3);
    $('div#jobsNo').html(totalJobs);
    chartData.removeColumns(2,2);
    chartData.sort([{column: 1, desc: true}])
    var view = new google.visualization.DataView(chartData);
    view.setRows(view.getFilteredRows([{column: 1, minValue: 1}]));
    var chart = new google.visualization.BarChart(document.getElementById('chart'));
    var options = {
            /*title: 'Number of Jobs Pledged',*/
            legend: {position: 'none'},
            hAxis: {baselineColor:'#fff'},
            /*hAxis.gridlines: {color:'#fff'},*/
            fontName: 'Montserrat',
            chartArea: {left:180, top:0, width: '80%', height: '80%'},
            colors:['#56ADE0'],
            animation:{
              duration: 1000,
              easing: 'in',
            }
    };
    chart.draw(view, options);
  }

  </script>
</body>
</html>